(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["fail"],{"02f8":function(t,e,a){},"1feb":function(t,e,a){},2909:function(t,e,a){"use strict";a.d(e,"a",(function(){return l}));var i=a("6b75");function n(t){if(Array.isArray(t))return Object(i["a"])(t)}a("a4d3"),a("e01a"),a("d28b"),a("a630"),a("e260"),a("d3b7"),a("3ca3"),a("ddb0");function r(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}var o=a("06c5");function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(t){return n(t)||r(t)||Object(o["a"])(t)||s()}},"327dc":function(t,e,a){"use strict";var i=a("63a0"),n=a.n(i);n.a},"3b33":function(t,e,a){"use strict";var i=a("f616"),n=a.n(i);n.a},4174:function(t,e,a){},"63a0":function(t,e,a){},a9f4:function(t,e,a){"use strict";var i=a("1feb"),n=a.n(i);n.a},cc89:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-result",{attrs:{status:"404",title:"404","sub-title":"Sorry, the page you visited does not exist."},scopedSlots:t._u([{key:"extra",fn:function(){return[a("a-button",{attrs:{type:"primary"},on:{click:t.toHome}},[t._v(" Back Home ")])]},proxy:!0}])})},n=[],r={name:"Exception404",methods:{toHome:function(){this.$router.push({path:"/"})}}},o=r,s=a("2877"),l=Object(s["a"])(o,i,n,!1,null,null,null);e["default"]=l.exports},d161:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=this,a=e.$createElement,i=e._self._c||a;return i("a-layout",{staticStyle:{"min-height":"100vh"}},[i("a-layout-sider",{attrs:{collapsible:""},on:{collapse:e.handleCollapsed},model:{value:e.collapsed,callback:function(t){e.collapsed=t},expression:"collapsed"}},[i("div",{staticClass:"menu-top-btn menu-transition",on:{click:function(){t.$router.back()}}},[i("a-icon",{class:{"menu-top-btn-action-i":e.collapsed},attrs:{type:"arrow-left"}}),i("span",{class:{"menu-top-btn-action-span":!e.collapsed}},[e._v("返回")])],1),i("a-button",{staticClass:"menu-add-dir-btn menu-transition",attrs:{type:"primary",shape:"round",icon:"folder-add"}},[e._v(" "+e._s(e.collapsed?"":"新建文件夹")+" ")]),i("div",{staticClass:"menu-wrapper"},[i("a-menu",{attrs:{mode:"inline",theme:"dark","inline-collapsed":e.collapsed},on:{click:e.handleMenuClick},model:{value:e.selectedKeys,callback:function(t){e.selectedKeys=t},expression:"selectedKeys"}},[e._l(e.folders,(function(t){return[i("a-menu-item",{key:t.fid},[i("a-icon",{attrs:{type:e.selectedKeys[0]!==t.fid?"folder":"folder-open"}}),i("span",[e._v(e._s(t.name))]),e.collapsed||e.selectedKeys[0]!==t.fid?e._e():i("a-icon",{staticStyle:{right:"0",position:"absolute",top:"35%"},attrs:{type:"edit"},on:{click:function(){e.$message.info("只是一个DEMO")}}})],1)]}))],2)],1)],1),i("a-layout",[i("a-layout-sider",{staticClass:"article-list-wrapper",style:[{maxWidth:e.articleListWidth+"px"},{minWidth:e.articleListWidth+"px"},{backgroundColor:"white"},{width:e.articleListWidth+"px"}],on:{collapse:e.handleCollapsed},model:{value:e.collapsedArticleList,callback:function(t){e.collapsedArticleList=t},expression:"collapsedArticleList"}},[i("div",{staticClass:"article-list-wrapper-btn"},[i("a-icon",{staticStyle:{"font-size":"16px"},attrs:{type:"file-add"}}),i("span",{class:e.collapsedArticleList?"article-list-wrapper-text-collapsed":"article-list-wrapper-text"},[e._v("新建文档")])],1),i("article-menu-list",{attrs:{collapsed:e.collapsedArticleList,folder:e.selectedFolder},on:{changeSelect:e.onSelected}})],1),i("a-layout-content",{staticStyle:{margin:"0 0",width:"100%",height:"100%","max-height":"100%"}},[i("article-editor",{staticClass:"article-editor",attrs:{article:e.selectedArticle,folders:e.folders}})],1)],1)],1)},n=[],r=(a("4de4"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.onLoadMore,expression:"onLoadMore"}],staticClass:"infinite-container",attrs:{"infinite-scroll-disabled":t.busy,"infinite-scroll-distance":10}},[a("a-list",{staticClass:"list",attrs:{"data-source":t.data,"item-layout":"horizontal",split:!1},scopedSlots:t._u([{key:"renderItem",fn:function(e){return a("a-list-item",{staticClass:"list-item",class:{"list-item-selected":e===t.selectedItem},on:{click:function(){t.onSelectChange(e)}}},[a("div",{staticClass:"list-item-content"},[a("a-list-item-meta",[a("a",{staticClass:"list-title",class:t.collapsed?"list-title-collapsed":"list-title-normal",attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.title))]),a("a-badge",{attrs:{slot:"avatar"},slot:"avatar"},[e.published?a("a-icon",{staticClass:"icon-color",attrs:{slot:"count",type:"check"},slot:"count"}):t._e(),a("a-avatar",{staticClass:"list-icon icon-color",attrs:{icon:t.fileIcon("md")}})],1),a("div",{staticClass:"list-description",class:t.collapsed?"list-description-collapsed":"list-description-normal",attrs:{slot:"description"},slot:"description"},[t._v(" "+t._s(e.description)+" ")])],1)],1)])}}])},[t.loading?a("div",{staticClass:"loading-container"},[a("a-spin",{staticStyle:{"margin-top":"10px"}})],1):t._e()])],1)}),o=[],s=(a("99af"),a("ca00")),l=a("487a"),c=a.n(l),d=a("e819"),u=a("b775"),f={MdArticleList:"/list/articles/md",GetMdArticle:"/article/markdown/",SaveMdArticle:"/article/markdown",UpdateMdStatus:"/article/markdown/status",DelMdArticle:"/article/markdown/",GetArticles:"/list/articles"},p={GetFolders:"/list/folders"};function h(){return Object(u["b"])({url:p.GetFolders,method:"post"})}function m(t){return Object(u["b"])({url:f.GetArticles,method:"post",data:t})}function g(t){return Object(u["b"])({url:f.GetMdArticle+t,method:"get"})}function v(t){return Object(u["b"])({url:f.SaveMdArticle,method:"post",data:t})}var b={directives:{infiniteScroll:c.a},name:"ArticleMenuList",props:{collapsed:{type:Boolean,default:!1},folder:{type:Object,default:null}},data:function(){return{loading:!1,busy:!1,pageNum:1,pageCount:10,selectedItem:null,iconColor:d["a"].primaryColor,data:[]}},beforeMount:function(){this.busy=!0,this.loading=!0},watch:{folder:function(t){var e=this;t&&(this.busy=!0,this.loading=!0,this.data=[],this.getData((function(t){e.loading=!1,e.busy=!1,t.result&&(e.data=t.result.list,e.onSelectChange(e.data[0]))})))}},methods:{getData:function(t){var e=this,a={fid:this.folder.fid,pageNum:this.pageNum,pageCount:this.pageCount};m(a).then((function(a){e.pageNum=e.pageNum+1,t(a)}))},onLoadMore:function(){var t=this;this.folder&&this.folder.fid&&(this.busy=!0,this.loading=!0,this.getData((function(e){t.data=t.data.concat(e.result.list),t.loading=!1,t.busy=!1,t.$nextTick((function(){window.dispatchEvent(new Event("resize"))}))})))},onSelectChange:function(t){this.selectedItem=t,this.$emit("changeSelect",t)},fileIcon:function(t){return Object(s["a"])(t)}}},y=b,k=(a("327dc"),a("2877")),w=Object(k["a"])(y,r,o,!1,null,"60812d81",null),x=w.exports,C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-layout",{staticClass:"editor-wrapper"},[a("a-layout-header",{staticClass:"editor-header"},[a("a-input",{staticClass:"editor-title",attrs:{size:"large"},model:{value:t.markdownForm.title,callback:function(e){t.$set(t.markdownForm,"title",e)},expression:"markdownForm.title"}},[a("a-icon",{attrs:{slot:"addonAfter",type:"delete"},on:{click:t.deleteArticle},slot:"addonAfter"}),a("a-icon",{attrs:{slot:"addonAfter",type:"menu-unfold"},on:{click:t.openInfoDrawer},slot:"addonAfter"})],1)],1),a("a-layout-content",[a("mavon-editor",{ref:"md",staticClass:"editor-md",style:{backgroundColor:t.markdown.editorBackground},attrs:{codeStyle:t.markdown.codeStyle,toolbars:t.markdown.toolbars,toolbarsBackground:t.markdown.toolbarsBackground,editorBackground:t.markdown.editorBackground,previewBackground:t.markdown.previewBackground},on:{save:t.save,imgAdd:t.imgAdd,imgDel:t.imgDel},model:{value:t.markdownForm.contentMarkdown,callback:function(e){t.$set(t.markdownForm,"contentMarkdown",e)},expression:"markdownForm.contentMarkdown"}})],1),a("article-status-drawer",{ref:"aStatus",attrs:{article:t.article,folders:t.folders}})],1)},S=[],F={UploadImg:"article/img"};function _(t){return Object(u["b"])({url:F.UploadImg,method:"put",data:t})}var A=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-drawer",{attrs:{width:"400",placement:"right",closable:!1,visible:t.drawerVisible},on:{close:t.closeInfoDrawer}},[a("a-row",{staticClass:"article-header",attrs:{type:"flex",justify:"start",align:"middle"}},[a("a-col",[a("a-icon",{staticStyle:{"font-size":"16px"},attrs:{type:"setting"}})],1),a("a-col",[a("span",{staticStyle:{"padding-left":"10px"}},[t._v("文档管理")])])],1),a("a-divider",{attrs:{orientation:"left"}},[t._v(" 状态 ")]),a("a-spin",{attrs:{spinning:t.preparingForm}},[a("a-form-model",{ref:"ruleForm",attrs:{model:t.form,rules:t.rules,"label-col":t.labelCol,"wrapper-col":t.wrapperCol}},[a("a-form-model-item",{attrs:{label:"文件夹",prop:"folderId"}},[a("a-select",{attrs:{placeholder:"请选择所属文件夹"},model:{value:t.form.folderId,callback:function(e){t.$set(t.form,"folderId",e)},expression:"form.folderId"}},[t._l(t.folders,(function(e){return[a("a-select-option",{key:e.fid},[t._v(" "+t._s(e.name)+" ")])]}))],2)],1),a("a-form-model-item",{attrs:{label:"发布",prop:"publish"}},[a("a-switch",{model:{value:t.form.publish,callback:function(e){t.$set(t.form,"publish",e)},expression:"form.publish"}})],1),a("a-form-model-item",{attrs:{label:"状态",prop:"status"}},[a("a-checkbox-group",{model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},[a("a-checkbox",{attrs:{value:t.statusKeys[0]}},[t._v(" 私密 ")]),a("a-checkbox",{attrs:{value:t.statusKeys[1]}},[t._v(" 置顶 ")]),a("a-checkbox",{attrs:{value:t.statusKeys[2]}},[t._v(" 关闭评论 ")])],1)],1),a("a-form-model-item",{attrs:{label:"简介",prop:"desc"}},[a("a-input",{attrs:{type:"textarea"},model:{value:t.form.desc,callback:function(e){t.$set(t.form,"desc",e)},expression:"form.desc"}})],1),a("a-form-model-item",{attrs:{"wrapper-col":{span:22,offset:1}}},[a("a-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v(" 提交修改 ")])],1)],1)],1),a("a-divider",{attrs:{orientation:"left"}},[t._v(" 统计 ")]),a("a-spin",{attrs:{spinning:t.preparingStatistics}},[a("a-row",{attrs:{type:"flex",justify:"center"}},[a("a-col",{attrs:{span:6,offset:1}},[a("a-statistic",{attrs:{title:"阅读数",value:t.article?t.article.reads:0},scopedSlots:t._u([{key:"suffix",fn:function(){return[a("a-icon",{attrs:{type:"eye"}})]},proxy:!0}])})],1),a("a-col",{attrs:{span:6,offset:1}},[a("a-statistic",{attrs:{title:"点赞数",value:t.article?t.article.like:0},scopedSlots:t._u([{key:"suffix",fn:function(){return[a("a-icon",{attrs:{type:"like"}})]},proxy:!0}])})],1),a("a-col",{attrs:{span:6,offset:1}},[a("a-statistic",{attrs:{title:"评论数",value:t.article?t.article.comments:0},scopedSlots:t._u([{key:"suffix",fn:function(){return[a("a-icon",{attrs:{type:"sound"}})]},proxy:!0}])})],1)],1)],1),a("a-divider",{attrs:{orientation:"left"}},[t._v(" 标签 ")]),a("div",{staticClass:"account-center-tags",staticStyle:{padding:"0 10px"}},[a("a-spin",{attrs:{spinning:t.tagsSpinning}},[t._l(t.tags,(function(e){return[e.length>20?a("a-tooltip",{key:e,attrs:{title:e}},[a("a-tag",{key:e,staticStyle:{"margin-bottom":"10px"},attrs:{closable:!0,close:function(){return t.handleTagClose(e)}}},[t._v(t._s(e.slice(0,20)+"..."))])],1):a("a-tag",{key:e,staticStyle:{"margin-bottom":"10px"},attrs:{closable:!0,close:function(){return t.handleTagClose(e)}}},[t._v(t._s(e))])]})),t.tagInputVisible?a("a-input",{ref:"tagInput",style:{width:"78px"},attrs:{type:"text",size:"small",value:t.tagInputValue},on:{change:t.handleInputChange,blur:t.handleTagInputConfirm,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleTagInputConfirm(e)}}}):a("a-tag",{staticStyle:{background:"#fff",borderStyle:"dashed"},on:{click:t.showTagInput}},[a("a-icon",{attrs:{type:"plus"}}),t._v("New Tag ")],1)],2)],1)],1)},O=[],I=(a("a4d3"),a("e01a"),a("4160"),a("caad"),a("2532"),a("2909")),M=(a("b2a3"),a("02f8"),a("1efe"),a("8bbf")),j=a.n(M),$=a("6042"),D=a.n($),E=a("41b2"),T=a.n(E),V=a("4d91"),L=a("4d26"),B=a.n(L),q=a("da05"),P=a("c005"),R=a.n(P),K=a("6a21"),N=a("2a95"),z=a("0644"),U=a.n(z),W=a("daa3"),G=a("b488"),H=a("4df5"),J=a("322e"),Q=a("7b05");function X(){}function Y(t,e,a){var i=t;e=e.replace(/\[(\w+)\]/g,".$1"),e=e.replace(/^\./,"");for(var n=e.split("."),r=0,o=n.length;r<o-1;++r){if(!i&&!a)break;var s=n[r];if(!(s in i)){if(a)throw new Error("please transfer a valid prop path to form item!");break}i=i[s]}return{o:i,k:n[r],v:i?i[n[r]]:null}}var Z={id:V["a"].string,htmlFor:V["a"].string,prefixCls:V["a"].string,label:V["a"].any,help:V["a"].any,extra:V["a"].any,labelCol:V["a"].shape(q["a"]).loose,wrapperCol:V["a"].shape(q["a"]).loose,hasFeedback:V["a"].bool,colon:V["a"].bool,labelAlign:V["a"].oneOf(["left","right"]),prop:V["a"].string,rules:V["a"].oneOfType([Array,Object]),autoLink:V["a"].bool,required:V["a"].bool,validateStatus:V["a"].oneOf(["","success","warning","error","validating"])},tt={name:"AFormModelItem",__ANT_NEW_FORM_ITEM:!0,mixins:[G["a"]],props:Object(W["t"])(Z,{hasFeedback:!1,autoLink:!0}),inject:{configProvider:{default:function(){return H["a"]}},FormContext:{default:function(){return{}}}},data:function(){return{validateState:this.validateStatus,validateMessage:"",validateDisabled:!1,validator:{}}},computed:{fieldValue:function(){var t=this.FormContext.model;if(t&&this.prop){var e=this.prop;return-1!==e.indexOf(":")&&(e=e.replace(/:/g,".")),Y(t,e,!0).v}},isRequired:function(){var t=this.getRules(),e=!1;return t&&t.length&&t.every((function(t){return!t.required||(e=!0,!1)})),e}},watch:{validateStatus:function(t){this.validateState=t}},mounted:function(){if(this.prop){var t=this.FormContext.addField;t&&t(this),this.initialValue=U()(this.fieldValue)}},beforeDestroy:function(){var t=this.FormContext.removeField;t&&t(this)},methods:{validate:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:X;this.validateDisabled=!1;var i=this.getFilteredRule(t);if(!i||0===i.length)return a(),!0;this.validateState="validating";var n={};i&&i.length>0&&i.forEach((function(t){delete t.trigger})),n[this.prop]=i;var r=new N["a"](n);this.FormContext&&this.FormContext.validateMessages&&r.messages(this.FormContext.validateMessages);var o={};o[this.prop]=this.fieldValue,r.validate(o,{firstFields:!0},(function(t,i){e.validateState=t?"error":"success",e.validateMessage=t?t[0].message:"",a(e.validateMessage,i),e.FormContext&&e.FormContext.$emit&&e.FormContext.$emit("validate",e.prop,!t,e.validateMessage||null)}))},getRules:function(){var t=this.FormContext.rules,e=this.rules,a=void 0!==this.required?{required:!!this.required,trigger:"change"}:[],i=Y(t,this.prop||"");return t=t?i.o[this.prop||""]||i.v:[],[].concat(e||t||[]).concat(a)},getFilteredRule:function(t){var e=this.getRules();return e.filter((function(e){return!e.trigger||""===t||(Array.isArray(e.trigger)?e.trigger.indexOf(t)>-1:e.trigger===t)})).map((function(t){return T()({},t)}))},onFieldBlur:function(){this.validate("blur")},onFieldChange:function(){this.validateDisabled?this.validateDisabled=!1:this.validate("change")},clearValidate:function(){this.validateState="",this.validateMessage="",this.validateDisabled=!1},resetField:function(){var t=this;this.validateState="",this.validateMessage="";var e=this.FormContext.model||{},a=this.fieldValue,i=this.prop;-1!==i.indexOf(":")&&(i=i.replace(/:/,"."));var n=Y(e,i,!0);this.validateDisabled=!0,Array.isArray(a)?n.o[n.k]=[].concat(this.initialValue):n.o[n.k]=this.initialValue,this.$nextTick((function(){t.validateDisabled=!1}))}},render:function(){var t=this,e=arguments[0],a=this.$slots,i=this.$scopedSlots,n=Object(W["l"])(this),r=Object(W["g"])(this,"label"),o=Object(W["g"])(this,"extra"),s=Object(W["g"])(this,"help"),l={props:T()({},n,{label:r,extra:o,validateStatus:this.validateState,help:this.validateMessage||s,required:this.isRequired||n.required})},c=Object(W["c"])(i["default"]?i["default"]():a["default"]),d=c[0];if(this.prop&&this.autoLink&&Object(W["w"])(d)){var u=Object(W["i"])(d),f=u.blur,p=u.change;d=Object(Q["a"])(d,{on:{blur:function(){f&&f.apply(void 0,arguments),t.onFieldBlur()},change:function(){if(Array.isArray(p))for(var e=0,a=p.length;e<a;e++)p[e].apply(p,arguments);else p&&p.apply(void 0,arguments);t.onFieldChange()}}})}return e(J["a"],l,[d,c.slice(1)])}},et={layout:V["a"].oneOf(["horizontal","inline","vertical"]),labelCol:V["a"].shape(q["a"]).loose,wrapperCol:V["a"].shape(q["a"]).loose,colon:V["a"].bool,labelAlign:V["a"].oneOf(["left","right"]),prefixCls:V["a"].string,hideRequiredMark:V["a"].bool,model:V["a"].object,rules:V["a"].object,validateMessages:V["a"].any,validateOnRuleChange:V["a"].bool},at=(V["a"].string,V["a"].string,V["a"].boolean,V["a"].boolean,V["a"].number,V["a"].number,V["a"].number,V["a"].oneOfType([String,V["a"].arrayOf(String)]),V["a"].custom(R.a),V["a"].func,V["a"].func,{name:"AFormModel",props:Object(W["t"])(et,{layout:"horizontal",hideRequiredMark:!1,colon:!0}),Item:tt,created:function(){this.fields=[]},provide:function(){return{FormContext:this}},inject:{configProvider:{default:function(){return H["a"]}}},watch:{rules:function(){this.validateOnRuleChange&&this.validate((function(){}))}},computed:{vertical:function(){return"vertical"===this.layout}},methods:{addField:function(t){t&&this.fields.push(t)},removeField:function(t){t.prop&&this.fields.splice(this.fields.indexOf(t),1)},onSubmit:function(t){Object(W["k"])(this).submit?this.$emit("submit",t):t.preventDefault()},resetFields:function(){this.model?this.fields.forEach((function(t){t.resetField()})):Object(K["a"])(!1,"FormModel","model is required for resetFields to work.")},clearValidate:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=t.length?"string"===typeof t?this.fields.filter((function(e){return t===e.prop})):this.fields.filter((function(e){return t.indexOf(e.prop)>-1})):this.fields;e.forEach((function(t){t.clearValidate()}))},validate:function(t){var e=this;if(this.model){var a=void 0;"function"!==typeof t&&window.Promise&&(a=new window.Promise((function(e,a){t=function(t){t?e(t):a(t)}})));var i=!0,n=0;0===this.fields.length&&t&&t(!0);var r={};return this.fields.forEach((function(a){a.validate("",(function(a,o){a&&(i=!1),r=T()({},r,o),"function"===typeof t&&++n===e.fields.length&&t(i,r)}))})),a||void 0}Object(K["a"])(!1,"FormModel","model is required for resetFields to work.")},validateField:function(t,e){t=[].concat(t);var a=this.fields.filter((function(e){return-1!==t.indexOf(e.prop)}));a.length?a.forEach((function(t){t.validate("",e)})):Object(K["a"])(!1,"FormModel","please pass correct props!")}},render:function(){var t,e=arguments[0],a=this.prefixCls,i=this.hideRequiredMark,n=this.layout,r=this.onSubmit,o=this.$slots,s=this.configProvider.getPrefixCls,l=s("form",a),c=B()(l,(t={},D()(t,l+"-horizontal","horizontal"===n),D()(t,l+"-vertical","vertical"===n),D()(t,l+"-inline","inline"===n),D()(t,l+"-hide-required-mark",i),t));return e("form",{on:{submit:r},class:c},[o["default"]])}}),it=at,nt=a("46cf"),rt=a.n(nt),ot=a("dfdf"),st=a("db14");j.a.use(rt.a,{name:"ant-ref"}),j.a.use(ot["b"]),it.install=function(t){t.use(st["a"]),t.component(it.name,it),t.component(it.Item.name,it.Item)};var lt=it,ct=a("ec89");j.a.use(lt);var dt={components:{TagSelectOption:ct["a"]},props:{article:{type:Object,default:null},folders:{type:Array,default:null}},data:function(){return{drawerVisible:!1,preparingForm:!0,preparingStatistics:!0,labelCol:{span:4,offset:0},wrapperCol:{span:18,offset:1},statusKeys:["private","isTop","converse"],form:{folderId:"",publish:!1,status:["private"],desc:""},rules:{folder:[{required:!0,message:"Please select Activity zone",trigger:"change"}],status:[{type:"array",message:"Please select at least one activity type",trigger:"change"}],desc:[{max:200,message:"简单描述文章内容，请输入200字以内。",trigger:"blur"}]},tags:[],tagsSpinning:!0,tagInputVisible:!1,tagInputValue:""}},mounted:function(){this.getTags()},watch:{article:function(t){var e=this;t&&(this.preparingStatistics=!1,this.form.status=[],[0,1,2].forEach((function(a){t[e.statusKeys[a]]&&e.form.status.push(e.statusKeys[a])}))),this.initData()},folders:function(){this.initData()}},methods:{initData:function(){this.article&&this.folders&&(this.folders[5].fid=this.article.fid,this.preparingForm=!1,this.form.publish=Boolean(this.article.published),this.form.desc=this.article.description||"",this.form.folderId=this.article.fid)},closeInfoDrawer:function(){this.drawerVisible=!1},openInfoDrawer:function(){this.drawerVisible=!0},onSubmit:function(){this.$refs.ruleForm.validate((function(t){if(!t)return!1;alert("submit!")}))},getTags:function(){var t=this;this.$http.get("/api/user/tags").then((function(e){t.tags=e.result,t.tagsSpinning=!1}))},handleTagClose:function(t){this.tags=this.tags.filter((function(e){return e!==t}))},showTagInput:function(){var t=this;this.tagInputVisible=!0,this.$nextTick((function(){t.$refs.tagInput.focus()}))},handleInputChange:function(t){this.tagInputValue=t.target.value},handleTagInputConfirm:function(){var t=this.tagInputValue,e=this.tags;t&&!e.includes(t)&&(e=[].concat(Object(I["a"])(e),[t])),Object.assign(this,{tags:e,tagInputVisible:!1,tagInputValue:""})}}},ut=dt,ft=(a("3b33"),Object(k["a"])(ut,A,O,!1,null,"7b5e5fc0",null)),pt=ft.exports,ht="请输入标题...",mt={components:{ArticleStatusDrawer:pt},props:{article:{type:Object,default:null},folders:{type:Array,default:null}},data:function(){return{local:!0,markdown:{codeStyle:"atom-one-dark",editorBackground:"#fafafa",toolbarsBackground:d["a"].primaryColor,previewBackground:"#fafafa",toolbars:{bold:!0,italic:!0,header:!0,underline:!0,strikethrough:!0,mark:!0,superscript:!0,subscript:!0,quote:!0,ol:!0,ul:!0,link:!0,imagelink:!0,code:!0,table:!0,fullscreen:!0,readmodel:!0,htmlcode:!0,help:!0,undo:!0,redo:!0,trash:!0,save:!0,navigation:!0,alignleft:!0,aligncenter:!0,alignright:!0,subfield:!0,preview:!1}},markdownForm:{articleId:null,title:ht,contentMarkdown:"",contentHtml:null,type:0},rules:{title:[{required:!0,message:"请输入标题",trigger:"blur"},{min:1,max:80,message:"长度在1到80个字符",trigger:"blur"}]},lastSaveTime:null,timer:null,infoDrawer:{visible:!1}}},created:function(){this.local||this.getArticle()},mounted:function(){this.timer=setInterval(this.intervalSave,12e4)},beforeDestroy:function(){clearInterval(this.timer)},watch:{article:function(t){if(t){var e=t.tid,a=t.title,i=t.content;this.markdownForm.articleId=e,this.markdownForm.title=a,this.markdownForm.contentMarkdown=i}}},methods:{getArticle:function(){var t=this,e=this.$route.query.a;null==e?this.markdownForm.contentMarkdown="":g(e).then((function(e){t.markdownForm.contentMarkdown=null==e.data.contentMarkdown?"":e.data.contentMarkdown,t.markdownForm.articleId=e.data.articleId,t.markdownForm.title=e.data.title,t.markdownForm.type=e.data.type})).catch((function(t){}))},save:function(){var t=this;v(this.markdownForm).then((function(e){t.$message.success("保存成功"),t.markdownForm.articleId=e.data.articleId,t.lastSaveTime=new Date})).catch((function(t){}))},intervalSave:function(){var t=this,e=new Date;e-this.lastSaveTime>=12e4&&v(this.markdownForm).then((function(e){t.$message.success("自动保存成功"),t.lastSaveTime=new Date})).catch((function(t){}))},imgAdd:function(t,e){var a={},i=this.$refs.md;a.base64Data=e.miniurl,a.type=e.type,_(a).then((function(e){i.$img2Url(t,Object({NODE_ENV:"production",VUE_APP_API_BASE_URL:"/api",VUE_APP_PREVIEW:"false",BASE_URL:"/"}).VUE_APP_BASE_API+"/img/"+e.data)})).catch((function(t){}))},imgDel:function(t,e){},deleteArticle:function(){this.markdownFile||this.$message.error("文件信息为空，无法删除！")},openInfoDrawer:function(){this.$refs.aStatus.openInfoDrawer()}}},gt=mt,vt=(a("a9f4"),Object(k["a"])(gt,C,S,!1,null,"19160e0e",null)),bt=vt.exports,yt={components:{ArticleMenuList:x,ArticleEditor:bt},data:function(){return{loading:!1,collapsed:!1,collapsedArticleList:!1,addBtnTitle:"新建文件",selectedKeys:[],mdValue:"",folders:[],selectedArticle:null,selectedFolder:null}},mounted:function(){var t=this;this.loading=!0,this.getDate((function(e){t.loading=!1,t.folders=e.result,t.selectedKeys=[t.folders[0].fid],t.selectedFolder=t.folders[0]}))},methods:{getDate:function(t){h().then((function(e){t(e)}))},handleCollapsed:function(t,e){},handleMenuClick:function(t){this.selectedFolder=this.folders.filter((function(e){return String(e.fid)===t.key}))[0]},onSelected:function(t){t&&(this.selectedArticle=t)}},computed:{articleListWidth:function(){return this.collapsedArticleList?120:300}},watch:{collapsed:function(t,e){var a=this;t!==e&&setTimeout((function(){a.collapsedArticleList=a.collapsed}),300)}}},kt=yt,wt=(a("dcfc"),Object(k["a"])(kt,i,n,!1,null,"19c086bc",null));e["default"]=wt.exports},dcfc:function(t,e,a){"use strict";var i=a("4174"),n=a.n(i);n.a},ec89:function(t,e,a){"use strict";a("a9e3"),a("b97c");var i=a("7571"),n=i["a"].CheckableTag;e["a"]={name:"TagSelectOption",props:{prefixCls:{type:String,default:"ant-pro-tag-select-option"},value:{type:[String,Number,Object],default:""},checked:{type:Boolean,default:!1}},data:function(){return{localChecked:this.checked||!1}},watch:{checked:function(t){this.localChecked=t},"$parent.items":{handler:function(t){this.value&&t.hasOwnProperty(this.value)&&(this.localChecked=t[this.value])},deep:!0}},render:function(){var t=this,e=arguments[0],a=this.$slots,i=this.value,r=function(e){t.$emit("change",{value:i,checked:e})};return e(n,{key:i,on:{change:r},model:{value:t.localChecked,callback:function(e){t.localChecked=e}}},[a.default])}}},f616:function(t,e,a){}}]);